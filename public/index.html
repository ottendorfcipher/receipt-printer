<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Receipt Printer - Configure & Print</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-main">
                <div class="header-text">
                    <h1>Receipt Printer</h1>
                    <p class="subtitle">Configure and print thermal receipts</p>
                </div>
                <button 
                    type="button" 
                    class="btn-ghost theme-toggle" 
                    id="themeToggle" 
                    aria-label="Toggle dark mode" 
                    aria-pressed="false">
                    Dark mode
                </button>
            </div>
        </header>

        <div class="main-content">
            <!-- Left Panel: Configuration Form -->
            <aside class="config-panel" role="form" aria-label="Receipt configuration">
                <div class="panel-section">
                    <h2>Store Information</h2>
                    <div class="form-group">
                        <label for="storeName">
                            Store Name <span class="required">*</span>
                        </label>
                        <input 
                            type="text" 
                            id="storeName" 
                            name="storeName" 
                            placeholder="My Store"
                            required
                            autocomplete="organization"
                            aria-required="true">
                    </div>
                    <div class="form-group">
                        <label for="address">Address</label>
                        <input 
                            type="text" 
                            id="address" 
                            name="address" 
                            placeholder="123 Main Street"
                            autocomplete="street-address">
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input 
                            type="tel" 
                            id="phone" 
                            name="phone" 
                            placeholder="(555) 123-4567"
                            autocomplete="tel">
                    </div>
                    <div class="form-group">
                        <label for="taxId">Tax ID</label>
                        <input 
                            type="text" 
                            id="taxId" 
                            name="taxId" 
                            placeholder="TAX-123456789">
                    </div>
                </div>

                <div class="panel-section">
                    <h2>Receipt Details</h2>
                    <div class="form-group">
                        <label for="receiptNo">
                            Receipt Number <span class="required">*</span>
                        </label>
                        <input 
                            type="text" 
                            id="receiptNo" 
                            name="receiptNo" 
                            placeholder="R-2024-001"
                            required
                            aria-required="true">
                        <button type="button" class="btn-icon" id="generateReceiptNo" aria-label="Generate receipt number">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor">
                                <path d="M13.5 2.5a2 2 0 0 1 0 4m0-4a2 2 0 0 0 0 4m0-4v1m0 3v1m-5-6a2 2 0 0 1 0 4m0-4a2 2 0 0 0 0 4m0-4v1m0 3v1M6 7v4M4 8h8M4 12h8" stroke-width="1.5"/>
                            </svg>
                        </button>
                    </div>
                    <div class="form-group">
                        <label for="cashier">Cashier Name</label>
                        <input 
                            type="text" 
                            id="cashier" 
                            name="cashier" 
                            placeholder="John Doe"
                            autocomplete="name">
                    </div>
                </div>

                <div class="panel-section">
                    <div class="section-header">
                        <h2>Line Items</h2>
                        <button type="button" class="btn-secondary" id="addItemBtn" aria-label="Add new item">
                            + Add Item
                        </button>
                    </div>
                    <div id="itemsList" class="items-list" role="list">
                        <!-- Items will be added here dynamically -->
                    </div>
                </div>

                <div class="panel-section">
                    <h2>Payment</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="subtotal">Subtotal</label>
                            <div class="input-with-prefix">
                                <span class="prefix">$</span>
                                <input 
                                    type="number" 
                                    id="subtotal" 
                                    name="subtotal" 
                                    step="0.01" 
                                    min="0"
                                    placeholder="0.00"
                                    readonly
                                    tabindex="-1">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="tax">Tax</label>
                            <div class="input-with-prefix">
                                <span class="prefix">$</span>
                                <input 
                                    type="number" 
                                    id="tax" 
                                    name="tax" 
                                    step="0.01" 
                                    min="0"
                                    placeholder="0.00">
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="discount">Discount</label>
                            <div class="input-with-prefix">
                                <span class="prefix">$</span>
                                <input 
                                    type="number" 
                                    id="discount" 
                                    name="discount" 
                                    step="0.01" 
                                    min="0"
                                    placeholder="0.00">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="total">Total</label>
                            <div class="input-with-prefix">
                                <span class="prefix">$</span>
                                <input 
                                    type="number" 
                                    id="total" 
                                    name="total" 
                                    step="0.01" 
                                    min="0"
                                    placeholder="0.00"
                                    readonly
                                    tabindex="-1">
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="paymentMethod">Payment Method</label>
                            <select id="paymentMethod" name="paymentMethod">
                                <option value="Cash">Cash</option>
                                <option value="Credit Card">Credit Card</option>
                                <option value="Debit Card">Debit Card</option>
                                <option value="Mobile Payment">Mobile Payment</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="amountPaid">Amount Paid</label>
                            <div class="input-with-prefix">
                                <span class="prefix">$</span>
                                <input 
                                    type="number" 
                                    id="amountPaid" 
                                    name="amountPaid" 
                                    step="0.01" 
                                    min="0"
                                    placeholder="0.00">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="change">Change</label>
                        <div class="input-with-prefix">
                            <span class="prefix">$</span>
                            <input 
                                type="number" 
                                id="change" 
                                name="change" 
                                step="0.01" 
                                placeholder="0.00"
                                readonly
                                tabindex="-1">
                        </div>
                    </div>
                </div>

                <div class="panel-section">
                    <h2>Footer</h2>
                    <div class="form-group">
                        <label for="footerMessage">Thank You Message</label>
                        <textarea 
                            id="footerMessage" 
                            name="footerMessage" 
                            rows="3"
                            placeholder="Thank you for your purchase!"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="barcode">Barcode Data</label>
                        <input 
                            type="text" 
                            id="barcode" 
                            name="barcode" 
                            placeholder="R2024001">
                    </div>
                </div>

                <div class="panel-section">
                    <h2>Printer</h2>
                    <div class="form-group">
                        <label for="printerSelect">Select Printer</label>
                        <select id="printerSelect" name="printerSelect">
                            <option value="">Loading printers...</option>
                        </select>
                        <button type="button" class="btn-secondary" id="refreshPrintersBtn" style="margin-top: 8px; width: 100%;">Refresh Printer List</button>
                    </div>
                </div>

                <div class="action-bar">
                    <button type="button" class="btn-secondary" id="resetBtn">Reset</button>
                    <button type="button" class="btn-primary" id="printBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9V2h12v7M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/>
                            <rect x="6" y="14" width="12" height="8"/>
                        </svg>
                        Print Receipt
                    </button>
                </div>
            </aside>

            <!-- Right Panel: Live Preview -->
            <section class="preview-panel" aria-label="Receipt preview">
                <div class="preview-header">
                    <h2>Preview</h2>
                    <div class="preview-info">
                        <span class="paper-width">80mm Paper</span>
                    </div>
                </div>
                <div class="receipt-preview" id="receiptPreview">
                    <div class="receipt-paper">
                        <div class="receipt-content" id="receiptContent">
                            <p class="preview-placeholder">Configure receipt details to see preview</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast" role="alert" aria-live="polite" aria-atomic="true"></div>

    <!-- Item Template -->
    <template id="itemTemplate">
        <div class="item-card" role="listitem">
            <div class="item-header">
                <span class="item-number"></span>
                <button type="button" class="btn-icon btn-remove" aria-label="Remove item">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 4L4 12M4 4l8 8"/>
                    </svg>
                </button>
            </div>
            <div class="form-group">
                <label>Item Name</label>
                <input type="text" class="item-name" placeholder="Coffee" required>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Quantity</label>
                    <input type="number" class="item-quantity" min="1" value="1" required>
                </div>
                <div class="form-group">
                    <label>Price</label>
                    <div class="input-with-prefix">
                        <span class="prefix">$</span>
                        <input type="number" class="item-price" step="0.01" min="0" placeholder="0.00" required>
                    </div>
                </div>
            </div>
            <div class="item-total">
                Total: <span class="item-total-value">$0.00</span>
            </div>
        </div>
    </template>

    <script src="app.js"></script>
</body>
</html>
